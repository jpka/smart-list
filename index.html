<element name="smart-list">
  <template>
    <content></content>
  </template>
  <script>
    Polymer.register(this, {
      get items() {
        return this.children;
      },
      push: function(node, props) {
        this.insert(this.items.length, node, props);
      },
      unshift: function(node, props) {
        this.insert(0, node, props);
      },
      insert: function(i, node, props) {
        if (typeof node === "string") node = document.createElement(node);
        if (props) {
          for (prop in props) {
            node[prop] = props[prop];
          }
        }

        if (i >= this.items.length) {
          this.appendChild(node);
        } else {
          this.insertBefore(node, this.items[i]);
        }

        this.showItem(i);
      },
      showItem: function(i) {
        var node = this.items[i];

        node.style["z-index"] = -i;
        node.style.position = "relative";
        node.style["margin-top"] = (-parseInt(node.clientHeight, 10)) + "px";
        setTimeout(function() {
          node.style.transition = "margin-top 1s";
          node.style["margin-top"] = "0px";
        }, 0);
      },
      get: function(id) {
        return this.querySelector("#" + id);
      },
      rm: function(id) {
        var el = this.get(id);
        if (el) {
          this.removeChild(el);
        }
      },
      rmByIndex: function(index) {
        var el = this.items[index];
        if (el) {
          this.removeChild(el);
        }
      }
    });
  </script>
</element>
