<element name="smart-list">
  <style polymer-scope="global">
    @-webkit-keyframes appear {
      0% {
        -webkit-transform: translateY(-100%);
      }

      100% {
        -webkit-transform: translateY(0);
      }
    }

    @keyframes appear {
      0% {
        transform: translateY(-100%);
      }

      100% {
        transform: translateY(0);
      }
    }

    .appear {
      z-index: -1;
      position: relative;
      -webkit-animation-name: appear;
      -webkit-animation-duration: 1s;
      animation-name: appear;
      animation-duration: 1s;
    }
  </style>
  <template>
    <content></content>
  </template>
  <script>
    Polymer.register(this, {
      get items() {
        return this.children;
      },
      push: function(node, props) {
        this.insert(this.items.length, node, props);
      },
      unshift: function(node, props) {
        this.insert(0, node, props);
      },
      insert: function(i, node, props) {
        if (typeof node === "string") node = document.createElement(node);
        if (props) {
          for (prop in props) {
            node[prop] = props[prop];
          }
        }

        if (i >= this.items.length) {
          this.appendChild(node);
        } else {
          this.insertBefore(node, this.items[i]);
        }

        this.animateEntrance(i);
      },
      animateEntrance: function(i) {
        var node = this.items[i],
        handler = function() {
          this.classList.remove("appear");
          this.style.zIndex = 0;
        };

        node.addEventListener("webkitAnimationEnd", handler);
        node.addEventListener("animationend", handler);
        node.classList.add("appear");
      },
      get: function(id) {
        return this.querySelector("#" + id);
      },
      rm: function(id) {
        var el = this.get(id);
        if (el) {
          this.removeChild(el);
        }
      },
      rmByIndex: function(index) {
        var el = this.items[index];
        if (el) {
          this.removeChild(el);
        }
      }
    });
  </script>
</element>
