<element name="smart-collection">
  <template>
    <style>
      @host {}
    </style>  
    <div id="container"></div>
  </template>
  <script>
    function add(el, nodeName, props) {
      var element = document.createElement(nodeName),
      prop;

      if (props) {
        for (prop in props) {
          element[prop] = props[prop];
        }
      }
      el.push(element);
    }

    function addBatch(el, nodeName, num) {
      for (var i = 0; i < num; i++) {
        add(el, nodeName);
      }
    }

    function addBatchWithProps(el, nodeName, propsList) {
      propsList.forEach(function(props) {
        add(el, nodeName, props);
      });
    }

    Polymer.register(this, {
      ready: function() {
        var self = this;
        this.children.forEach(function(node) {
          self.$.container.appendChild(node);
        });
      },
      get items() {
        return this.$.container.childNodes;
      },
      add: function(nodeName, secondParam) {
        switch (typeof secondParam) {
          case "undefined":
            add(this, nodeName);
          break;
          case "number":
            addBatch(this, nodeName, secondParam);
          break;
          case "object":
            if (Object.prototype.toString.call(secondParam).indexOf("Array") > -1) {
            addBatchWithProps(this, nodeName, secondParam);
          } else {
            add(this, nodeName, secondParam);
          }
          break;
        }
      },
      push: function(item) {
        this.$.container.appendChild(item);
      },
      get: function(id) {
        return this.$.container.querySelector("#" + id);
      },
      remove: function(id) {
        this.$.container.removeChild(this.get(id));
      },
      removeByIndex: function(index) {
        this.$.container.removeChild(this.items[index]);
      }
    });
  </script>
</element>
