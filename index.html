<element name="smart-list">
  <template>
    <style>
      @host {}
    </style>  
    <div id="container"></div>
  </template>
  <script>
    Polymer.register(this, {
      ready: function() {
        var self = this;
        this.children.forEach(function(node) {
          self.$.container.appendChild(node);
        });
      },
      get items() {
        return this.$.container.childNodes;
      },
      push: function(node, props) {
        this.insert(this.items.length, node, props);
      },
      unshift: function(node, props) {
        this.insert(0, node, props);
      },
      insert: function(i, node, props) {
        if (typeof node === "string") node = document.createElement(node);
        if (props) {
          for (prop in props) {
            node[prop] = props[prop];
          }
        }
        if (i >= this.items.length) {
          this.$.container.appendChild(node);
        } else {
          this.$.container.insertBefore(node, this.items[i]);
        }
      },
      get: function(id) {
        return this.$.container.querySelector("#" + id);
      },
      rm: function(id) {
        var el = this.get(id);
        if (el) {
          this.$.container.removeChild(el);
        }
      },
      rmByIndex: function(index) {
        var el = this.items[index];
        if (el) {
          this.$.container.removeChild(el);
        }
      }
    });
  </script>
</element>
